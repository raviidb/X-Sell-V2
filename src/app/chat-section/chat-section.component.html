
<div class="chat-container">
  <div  class="content-wrap" style="background-image: url('assets/images/background.png'); background-position: center;background-repeat: no-repeat;
  background-size: cover;">
    <div class="header">
      <img src="assets/images/logo.png" class="logo-img">
      <div class="userDetails">
        <p class="rightText"><img src="assets/images/menu.png" class="menu-icon"></p>
      </div>
    </div>
    <div #scrollMe style ="scroll-behavior: smooth;" class="body-container" >

      <!-- <div class='loader' *ngIf='showLoader'>
        <div class="row loader-style">
          <img src="assets/loader.gif" height="60">
          <div class="p-styel">
            <p class="">Please Wait...</p>
          </div>
        </div>
      </div> -->

      <ul class="StepProgress">
        <li class="show-animation" >
          <div class="timeLineMsg right" style="margin-top: 0px;">
            <div class="content-hr"></div>
            <div class="content">
              <p>Hello!!<br>
                Welcome to DMI Finance</p>
            </div>
          </div>
        </li>
        <li class="show-animation"  *ngIf="showMsg1">
          <div class="timeLineMsg right">
            <div class="stepper-hr1"></div>
            <div class="content">
              <!-- <p>Your  loan is just a cup of coffee ahead. Have a cup and let us start...</p> -->
              <p>DMI Finance offers flexible loan offers which you can avail in less than 5 minutes.</p>
            </div>
          </div>
        </li>
        <li class="show-animation"  *ngIf="showMsg2">
          <div class="timeLineMsg right">
            <div class="stepper-hr1"></div>
            <div class="content">
              <p>Exciting!!<br>
                Let's get started with few basic information.</p>
            </div>
          </div>
        </li>

        <li class="show-animation"  *ngIf="showMsg3">
          <div class="timeLineMsg right">
            <div class="stepper-hr2"></div>
            <div class="content">
              <p>Please provide your mobile number</p>
            </div>
          </div>
        </li>
        <li class="show-animation"  *ngIf="!afterVerifedOTP && showMsg4" style="margin-top: 5px;">
          <div class="custom-card">
              <mat-form-field class="width">    
                <input matInput placeholder="Enter your mobile number" [(ngModel)]="mobileNumber" maxlength="10">
              </mat-form-field>
            <div class="card-btn">
              <button (click)="onContinue(2)">Continue</button>
            </div>
            <p class="otp-font" *ngIf="otpOption">An OTP has been send to your mobile number. Please verify input area to enter OTP</p>
            <div class="otp-section" *ngIf="otpOption">
              <ng-otp-input #ngOtpInput (onInputChange)="onOtpChange($event)" [config]="config"></ng-otp-input>
              <a (click)="resendOTP()" style="cursor: pointer;">Resend</a>
            </div>
          </div>
        </li>
        <!-- <ng-container > -->
          <li class="show-animation"  *ngIf="afterVerifedOTP && showMsg12">
            <div class="timeLineMsg-right left contact-sec">
              <div class="stepper-hr-right3"></div>     
              <div class="alt-content">
                <div class="happy-sec">
                  <p>{{mobileNumber}}</p><img src="assets/images/verify.png">
                </div>
              </div>
            </div>
          </li>
        <li class="show-animation"  *ngIf="afterVerifedOTP && showMsg13">
          <div class="timeLineMsg right margin-top96">
            <div class="stepper-hr2"></div>
            <div class="content">
              <p>Thank you for verifying your mobile number.</p>
            </div>
          </div>
        </li>

      <li class="show-animation"  *ngIf="afterVerifedOTP && showMsg28">
        <div class="timeLineMsg right left-content-top-margin">
          <div class="stepper-hr3"></div>
          <div class="content">
            <p>Please provide your PAN.</p>
          </div>
        </div>
      </li>
      <li class="show-animation"  *ngIf="afterVerifedOTP && showMsg29 && !isPANsubmit">
        <div class="custom-card">
            <mat-form-field class="width">
              <input matInput placeholder="Enter your PAN Number" [(ngModel)]="userPan">
            </mat-form-field>
          <div class="card-btn">
            <button (click)="onPanSubmit()" class="margin-top10">Continue</button>
          </div>
        </div>
      </li>

      <li class="show-animation"  *ngIf="isPANsubmit && showMsg30">
        <div class="timeLineMsg-right left kyc_pan_section">
          <div class="stepper-hr-right4"></div>     
          <div class="alt-content">
            <div class="happy-sec">
              <p>{{userPan}}</p><img src="assets/images/verify.png">
            </div>
          </div>
        </div>
      </li>
      <li class="show-animation"  *ngIf="isPANsubmit && showMsg32">
        <div class="timeLineMsg right margin-top96">
          <div class="stepper-hr2"></div>
          <div class="content">
            <p>Whoosh!! You have done the excellent job.</p>
          </div>
        </div>
      </li>

      <li class="show-animation"  *ngIf="isPANsubmit && showMsg33">
        <div class="timeLineMsg right">
          <div class="stepper-hr3"></div>
          <div class="content">
            <p>Please complete your KYC.</p>
          </div>
        </div>
      </li>
      <li class="show-animation"  *ngIf="isPANsubmit && showMsg34 && !isKYCSuccess">
        <button (click)="kycModal(1)">Proceed</button>
    </li>

    <li class="show-animation  margin-top15" *ngIf="isKYCSuccess && showMsg103">
      <div class="timeLineMsg-right left kyc-sec">
        <div class="stepper-hr-right1"></div> 
        <div class="alt-content">
          <div class="happy-sec">
            <p>KYC</p><img src="assets/images/verify.png">
          </div>
        </div>
      </div>
    </li>

    <li class="show-animation"  *ngIf="isKYCSuccess && showMsg40">
      <div class="timeLineMsg right margin-top96">
        <div class="stepper-hr2"></div>
        <div class="content">
          <p>Thank you for completing your KYC.</p>
        </div>
      </div>
    </li>

    <li class="show-animation"  *ngIf="isKYCSuccess && showMsg41">
      <div class="timeLineMsg right">
        <div class="stepper-hr2"></div>
        <div class="content">
          <p>Please update your Personal Information -</p>
        </div>
      </div>
    </li>

    <li class="show-animation"  *ngIf="isKYCSuccess && showMsg42 && !isSubmittedComm">
      <div class="custom-card">
          <h4>Communication Details</h4>
          
          <form [formGroup]="residenceForm" (ngSubmit)="onSubmitComAddressInfo()">
            <mat-form-field class="width">
              <input matInput placeholder="Father / Spouse Name" formControlName="fatherSpouseName">
            </mat-form-field>
            <mat-form-field appearance="fill" class="width">
              <mat-label>Gender</mat-label>
              <mat-select formControlName="gender" [ngClass]="{ 'is-invalid': personalInfoValidation && userDetailForm.controls.gender.errors }" required>
                <mat-option *ngFor="let gender of genderTypes" [value]="gender.value">{{gender.viewValue}}</mat-option>
              </mat-select>
            </mat-form-field>

            <mat-form-field appearance="fill">
              <mat-label>Date of Birth (dd-mm-yyyy)</mat-label>
              <input matInput [matDatepicker]="picker" formControlName="dob" [ngClass]="{ 'is-invalid': personalInfoValidation && userDetailForm.controls.dob.errors }" (click)="picker.open()" required readonly>
              <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
              <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>
            
            <!-- <h5 class="formTitle">Residential Address</h5> -->
            <mat-form-field appearance="fill" class="width">
              <mat-label>Address Type</mat-label>
              <mat-select formControlName="address_type">
                <mat-option *ngFor="let resType of addressType" [value]="resType.value">
                  {{resType.viewValue}}
                </mat-option>
              </mat-select>
            </mat-form-field>

            <mat-form-field class="width">
              <input matInput placeholder="Time At Current Residence (Months)" formControlName="residence_time">
            </mat-form-field>

            <mat-form-field appearance="fill" class="width margin-top15">
              <mat-label>Ownership Type</mat-label>
              <mat-select formControlName="ownership_type">
                <mat-option *ngFor="let resType of residenceType" [value]="resType.value">
                  {{resType.viewValue}}
                </mat-option>
              </mat-select>
            </mat-form-field>

            <mat-form-field class="width">
              <input matInput placeholder="Flat / Building Details" formControlName="flat_details">
            </mat-form-field>

            <!-- <mat-form-field class="width">
              <input matInput placeholder="Area / Street" formControlName="area_details">
            </mat-form-field> -->

            <!-- <mat-form-field class="width">
              <input matInput placeholder="Landmark" formControlName="landmark">
            </mat-form-field> -->

            <mat-form-field class="width">
              <input matInput placeholder="Postal Code" formControlName="postal_code">
            </mat-form-field>
            
            <mat-form-field class="width">
              <input matInput placeholder="City" formControlName="city">
            </mat-form-field>

            <mat-form-field class="width">
              <input matInput placeholder="State" formControlName="state">
            </mat-form-field>

            <!-- <mat-form-field class="width">
              <input matInput placeholder="County" formControlName="country">
            </mat-form-field> -->

            <h5 class="formTitle">Communication Address</h5>

            <mat-checkbox class="example-margin" [checked]="isCheckedSameAddress" 
            (change)="onSameAddressChecked($event)">Same as Residential Address</mat-checkbox>

            <ng-container *ngIf="!isNotSameAddress">
              <mat-form-field appearance="fill" class="width">
                <mat-label>Address Type</mat-label>
                <mat-select formControlName="communi_address_type">
                  <mat-option *ngFor="let resType of addressType" [value]="resType.value">
                    {{resType.viewValue}}
                  </mat-option>
                </mat-select>
              </mat-form-field>

              <mat-form-field appearance="fill" class="width margin-top15">
                <mat-label>Ownership Type</mat-label>
                <mat-select formControlName="communi_ownership_type">
                  <mat-option *ngFor="let resType of residenceType" [value]="resType.value">
                    {{resType.viewValue}}
                  </mat-option>
                </mat-select>
              </mat-form-field>

              <mat-form-field class="width">
                <input matInput placeholder="Flat / Building Details" formControlName="communi_flat_details">
              </mat-form-field>

              <mat-form-field class="width">
                <input matInput placeholder="Area / Street" formControlName="communi_area">
              </mat-form-field>

              <mat-form-field class="width">
                <input matInput placeholder="Landmark" formControlName="communi_landmark">
              </mat-form-field>

              <mat-form-field class="width">
                <input matInput placeholder="Postal Code" formControlName="communi_postal">
              </mat-form-field>

              <mat-form-field class="width">
                <input matInput placeholder="City" formControlName="communi_city">
              </mat-form-field>

              <mat-form-field class="width">
                <input matInput placeholder="State" formControlName="communi_state">
              </mat-form-field>

              <mat-form-field class="width">
                <input matInput placeholder="County" formControlName="communi_country">
              </mat-form-field>

              <mat-form-field class="width">
                <input matInput placeholder="Time At Current Residence" formControlName="communi_time">
              </mat-form-field>
            </ng-container>

            <div class="card-btn checkbox-btn">
              <button class="margin-top15">Submit</button>
            </div>
          </form>
      </div>
    </li>

    <li class="show-animation"  *ngIf="isSubmittedComm && showMsg43">
      <div class="card-right">
      <div class="custom-card right-custom-card">
        <h4>Communication Details</h4>
        <div class="flex-checkbox main">
            <span>Father / Spouse Name</span><img src="assets/images/greenChecked.png">
        </div>
        <div class="flex-checkbox main">
            <span>Gender</span><img src="assets/images/greenChecked.png">
        </div>
        <div class="flex-checkbox main">
            <span>Date of Birth</span><img src="assets/images/greenChecked.png">
        </div>
        <div class="flex-checkbox">
          <span>Address</span><img src="assets/images/greenChecked.png">
        </div>
        <div class="card-btn checkbox-btn">
          <button (click)="onFillComAddressInfo()">Update Details</button>
        </div>
      </div>
    </div>
    </li>

    <li class="show-animation"  *ngIf="isSubmittedComm && showMsg106">
      <div class="timeLineMsg left-allign margin-top30">
        <img src="assets/images/satisfaction.png" height="85">
      </div>
    </li>

    <li class="show-animation"  *ngIf="isSubmittedComm && showMsg44">
      <div class="timeLineMsg right">
        <div class="stepper-hr2"></div>
        <div class="content">
          <p>Whoosh!! You have done the excellent job.</p>
        </div>
      </div>
    </li>

    <li class="show-animation"  *ngIf="isSubmittedComm && showMsg45">
      <div class="timeLineMsg right">
        <div class="stepper-hr2"></div>
        <div class="content">
          <p>Please provide your Banking Information.</p>
        </div>
      </div>
    </li>

    <li class="show-animation"  *ngIf="isSubmittedComm && showMsg38 && !showBankingForm">
      <button (click)="kycModal(2)">Proceed with Account Aggregator</button>
    </li>

    <li class="show-animation"  *ngIf="isSubmittedComm && showMsg39 && !showBankingForm">
      <button style="margin-top: 12px;" (click)="onSubmitBankingDetails()">Skip >></button>
    </li>

    <li class="show-animation"  *ngIf="showBankingForm && showMsg44">
        <div class="card-right">
        <div class="custom-card right-custom-card">
          <h4>Banking Details</h4>
          <div class="flex-checkbox main">
              <span>Bank Name</span><img src="assets/images/greenChecked.png">
          </div>
          <div class="flex-checkbox main">
              <span>Bank Holder Name</span><img src="assets/images/greenChecked.png">
          </div>
          <div class="flex-checkbox main">
              <span>Account Number</span><img src="assets/images/greenChecked.png">
          </div>
          <div class="flex-checkbox">
            <span>IFSC Code</span><img src="assets/images/greenChecked.png">
          </div>
          <div class="card-btn checkbox-btn">
            <button (click)="onFillComAddressInfo()">Update Details</button>
          </div>
        </div>
      </div>
    </li>

      <li class="show-animation"  *ngIf="showBankingForm && showMsg68 && !isLoanOfferCheck">
        <div class="timeLineMsg right">
          <div class="stepper-hr1"></div>
          <div class="content">
            <p class="">Please allow us a moment to find the right loan offers for you.<br><br>
              <img src="assets/loader.gif" height="60">
              <br><br>Please Wait...</p>
          </div>
        </div>
      </li>
    
    <li class="show-animation"  *ngIf="isLoanOfferCheck && showMsg48">
      <div class="timeLineMsg right">     
        <div class="stepper-hr2"></div>
        <div class="content">
          <p>You are eligible for a Credit Line of amount INR 35,000</p>
        </div>
      </div>
    </li>
    <li class="show-animation"  *ngIf="isLoanOfferCheck && showMsg51 && !isloanOffersSubmitted">
      <button class="" (click)="loanOfferSubmit()">Accept</button>
    </li>
    
    <li class="show-animation"  *ngIf="isloanOffersSubmitted && showMsg63">
      <div class="timeLineMsg-right left contact-sec">
        <div class="stepper-hr-right3"></div>     
        <div class="alt-content">
          <div class="happy-sec">
            <p>Accepted</p><img src="assets/images/verify.png">
          </div>
        </div>
      </div>
    </li>

    <li class="show-animation"  *ngIf="isloanOffersSubmitted && showMsg65">
      <div class="timeLineMsg left-allign margin-top96">
        <img src="assets/images/rocket.png" height="85">
      </div>
    </li>
    
    <li class="show-animation"  *ngIf="isloanOffersSubmitted && showMsg52">
      <div class="timeLineMsg right">
        <div class="stepper-hr1"></div>
        <div class="content">
          <p>For easy disbursement and repayment please register for E-mandate</p>
        </div>
      </div>
    </li>

    <li class="show-animation"  *ngIf="isloanOffersSubmitted && showMsg53 && !isEMandateCompleted">
      <button (click)="kycModal(3)">Proceed for E-mandate</button>
    </li>
    
    <li class="show-animation"  *ngIf="isEMandateCompleted && showMsg54">
      <div class="timeLineMsg-right left">
        <div class="stepper-hr-right4"></div> 
        <div class="alt-content">
          <div class="happy-sec">
            <p>E-mandate</p><img src="assets/images/verify.png" style="margin-left: 10px;height: 22px;">
          </div>
        </div>
      </div>
    </li>
    
    <li class="show-animation"  *ngIf="isEMandateCompleted && showMsg55">
      <div class="timeLineMsg right margin-top96">
        <div class="stepper-hr1"></div>
        <div class="content">
          <p>Please review the Loan Details Sheet and accept Terms and Conditions.</p>
        </div>
      </div>
    </li>

    <li class="show-animation"  *ngIf="isEMandateCompleted && showMsg56 && !isLDSCompleted">
      <button (click)="kycModal(4)">Proceed</button>
    </li>

    <li class="show-animation"  *ngIf="isLDSCompleted && showMsg57">
      <div class="timeLineMsg-right left">
        <div class="stepper-hr-right4"></div> 
        <div class="alt-content">
          <div class="happy-sec">
            <p>T&C and LDS Accepted</p><img src="assets/images/verify.png" style="margin-left: 10px;height: 22px;">
          </div>
        </div>
      </div>
    </li>
    
    <li class="show-animation"  *ngIf="isLDSCompleted && showMsg58">
      <div class="timeLineMsg right margin-top96">
        <div class="stepper-hr1"></div>
        <div class="content">
          <p>Great!! You are only one more step away from Loan completion.</p>
        </div>
      </div>
    </li>

    <li class="show-animation"  *ngIf="isLDSCompleted && showMsg59 && !isLoanJourneyCompleted">
      <div class="timeLineMsg right">
        <div class="stepper-hr1"></div>
        <div class="content">
          <p class="">Please allow us a moment to complete the loan creation journey.<br><br>
            <img src="assets/loader.gif" height="60">
            <br><br>Please Wait...</p>
        </div>
      </div>
    </li>

    <li class="show-animation" *ngIf="isLoanJourneyCompleted && showMsg61">
      <div class="timeLineMsg left-allign margin-top30">
        <img src="assets/images/congratulations.png" height="85">
      </div>
    </li>

    <li class="show-animation" *ngIf="isLoanJourneyCompleted && showMsg62">
      <div class="timeLineMsg right">
        <div class="stepper-hr1"></div>
        <div class="content">
          <p>Congratulations !!<br><br> Your new loan number is: <strong>{{loanNumber}}</strong>.</p>
        </div>
      </div>
    </li>

    <li class="show-animation"  *ngIf="isLoanJourneyCompleted && showMsg104">
      <div class="timeLineMsg right left-content-top-margin">
        <div class="stepper-hr1"></div>
        <div class="content">
          <p>The loan amount of <strong>INR {{value3}}</strong> will be transferred to your <strong>{{userDetails.UserInfo[0].Bank_Name}} A/c {{userDetails.UserInfo[0].Account_Number}}</strong> shortly.</p>
        </div>
      </div>
    </li>

    <li class="show-animation" *ngIf="isLoanJourneyCompleted && showMsg105">
      <div class="timeLineMsg right left-content-top-margin">
        <div class="stepper-hr1"></div>
        <div class="content">
          <p>Please feel free to reach our Toll Free number 1800-747-747 for any queries or visit our website : <a href="https://dmifinance.in">https://dmifinance.in</a></p>
        </div>
      </div>
    </li>
      </ul>
    </div>
  </div>
</div>

